import"antd/lib/message/style";import e from"antd/lib/message";import"antd/lib/select/style";import n from"antd/lib/select";import t,{Suspense as r,lazy as o}from"react";import i from"styled-components";import u from"libphonenumber-js";import{FormattedMessage as a}from"react-intl";import{CognitoUserAttribute as c,CognitoUser as s,AuthenticationDetails as l,CognitoUserPool as f}from"amazon-cognito-identity-js";function m(e,n,t,r,o,i,u){try{var a=e[i](u),c=a.value}catch(e){return void t(e)}a.done?n(c):Promise.resolve(c).then(r,o)}function p(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function u(e){m(i,r,o,u,a,"next",e)}function a(e){m(i,r,o,u,a,"throw",e)}u(void 0)}))}}function d(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}!function(){const e={"process.env.AWS_COGNITO_USER_POOL_ID":'"ap-southeast-1_URpT8rFMN"',"process.env.AWS_COGNITO_USER_POOL_APP_CLIENT":'"6uobj0e81bfc2hbo1rjked632r"',NODE_ENV:"production"};try{if(process)return process.env=Object.assign({},process.env),void Object.assign(process.env,e)}catch(e){}globalThis.process={env:e}}();var h,v="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 20 20'%3e %3cg%3e %3cpath fill='%23af0974' d='M10 0A10 10 0 1 1 0 10 10 10 0 0 1 10 0z' transform='translate(-156 -79) translate(156 79)'/%3e %3cpath fill='white' d='M13 5.806L12.194 5 9 8.194 5.806 5 5 5.806 8.194 9 5 12.194l.806.806L9 9.806 12.194 13l.806-.806L9.806 9z' transform='translate(-156 -79) translate(157 80)'/%3e %3c/g%3e%3c/svg%3e",g="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 20 20'%3e %3cg%3e %3cpath fill='%232fbb8a' d='M10 0A10 10 0 1 1 0 10 10 10 0 0 1 10 0z' transform='translate(-156 -79) translate(156 79)'/%3e %3cpath fill='white' d='M6.582 11.623L4.2 9.236l-.8.8 3.182 3.182L13.4 6.4l-.8-.8z' transform='translate(-156 -79) translate(158 80)'/%3e %3c/g%3e%3c/svg%3e",w="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='22' height='20' viewBox='0 0 22 20'%3e %3cg%3e %3cpath fill='%23ffbc41' d='M9.248 3.186a2 2 0 0 1 3.5 0l7.617 13.85A2 2 0 0 1 18.617 20H3.383a2 2 0 0 1-1.753-2.964z' transform='translate(-154 -78) translate(154 78)'/%3e %3cpath fill='white' d='M.846 1.541h1.417l.192-5.8H.642zm1.766 1.825a.983.983 0 0 0-1.021-.985.986.986 0 1 0 0 1.97.983.983 0 0 0 1.021-.985z' transform='translate(-154 -78) translate(163.648 90.371)'/%3e %3c/g%3e%3c/svg%3e",E=/^[a-z\s]+$/i,N=/^[a-zA-Z0-9\s,.'-]{3,}$/,b=/^[a-zA-Z0-9]*$/,O=/^[0-9]*$/,P=/^[0-9]{2}$/,_=/^(?=.*[\d])(?=.*[!$#])((?=.*[A-Z]))[a-zA-Z0-9!@#$%^&*]{8,}$/,A=/^[0-9]{6}$/,C=/^[0-9]{5,13}$/,I=/^\+?\d+$/,U=function(e,n,r){var o;return d(o={},e,n),d(o,"message",r.trim().length>0?t.createElement(a,{id:r}):"Invalid Input Value"),o},x=function(e){return U("required",!0,e)},R=function(e,n){return U("pattern",e,n)},S=function(e,n){return U("validator",e,n)},y=function(e,n){try{return u("+".concat(n+e.replace("-",""))).isValid()}catch(e){return!1}},T=function(e){var n="",t="";try{var r=u(e);n=r.countryCallingCode,t=r.nationalNumber}catch(e){}return{countryCode:n,strippedNumber:t}},k=function(e,n){try{return(null==n||!n.length||"0"!==n[0])&&u(e+n).isValid()}catch(e){return!1}},z=function(e,n,t,r){n&&!y(n,r)&&t(new Error("Invalid error")),t()},L=function(e,n,t){n&&!k(n)&&t(new Error("Invalid error")),t()},V=function(e,n){return[x(e),R(N,n)]},M=function(e,n){return[x(e),R(b,n)]},j=function(e,n){return[x(e),R(O,n)]},D=function(e,n){return[R(P,n)]},F=function(e,n){return[x(e),S((function(e,n,t){L(0,n,t)}),n)]},$=function(e,n){return U("type",e,n)},G=function(e,n){return[x(e),$("email",n)]},W=function(e,n){return[x(e),R(_,n)]},Z=function(e){return[x(e)]},B=function(e,n){return[x(e),R(E,n)]},H=function(e,n){return[x(e),R(A,n)]},X=function(e,n){return[x(e),R(C,n)]},q=function(e,n){return[x(e),R(I,n)]},J=function(e,n,t){return[x(n),S((function(n,t,r){t&&e("password")!==t||r(),r(new Error("Password does not match"))}),t)]},K=function(e){var n=e;return e&&"+"!==e[0]&&(n="+"+e),n},Q=function(e,n){var t=n;return n&&"0"===n[0]&&(t=n.substr(1,n.length)),K(e)+t},Y=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{fallback:null},i=n.fallback,u=void 0===i?null:i,a=o(e);return function(e){return t.createElement(r,{fallback:u},t.createElement(a,e))}};function ee(){return ne.apply(this,arguments)}function ne(){return(ne=p(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=de().getCurrentUser(),e.abrupt("return",new Promise((function(e,t){n.getSession((function(r,o){if(r)return t(r);n.getUserAttributes((function(n,r){if(n)return t(n);e(r)}))}))})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e,n,t,r){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5?arguments[5]:void 0;return new Promise((function(u,a){var s=new c({Name:"email",Value:e}),l=new c({Name:"custom:group",Value:i?"group-owner":"group-vet"}),f=[];f.push(s),f.push(l),f.push(new c({Name:"custom:business",Value:o.toString()})),f.push(new c({Name:"given_name",Value:t})),f.push(new c({Name:"phone_number",Value:r})),de().signUp(e,n,f,null,(function(e,n){e&&a(e),u(n)}))}))}function re(e,n){return new Promise((function(t,r){var o=de(),i=new s({Username:e,Pool:o});if(null===i){var u=new Error({code:"NotAuthorizedException",message:"No user data is present",name:"NotAuthorizedException"});r(u)}i.confirmRegistration(n,!0,(function(e,n){e&&r(e),t(n)}))}))}function oe(e){return new Promise((function(n,t){var r=de(),o=new s({Username:e,Pool:r});if(null===o){var i=new Error({code:"NotAuthorizedException",message:"No user data is present",name:"NotAuthorizedException"});t(i)}o.resendConfirmationCode((function(e,r){e&&t(e),n(r)}))}))}function ie(e,n){return new Promise((function(t,r){var o=new l({Username:e,Password:n}),i={Username:e,Pool:de()};new s(i).authenticateUser(o,{onSuccess:function(e){var n=e.getAccessToken().getJwtToken(),r=e.getRefreshToken().token,o=e.idToken.jwtToken;t({payload:{accessToken:n,refreshToken:r,idToken:o}})},onFailure:function(e){r(e)}})}))}function ue(){return ae.apply(this,arguments)}function ae(){return(ae=p(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(n=de().getCurrentUser())){e.next=3;break}throw new Error({code:"NotAuthorizedException",message:"No user is logged in",name:"NotAuthorizedException"});case 3:return e.next=5,Se((function(e,t){n.getSession((function(n,r){if(n)return t(n);if(!r.isValid()){var o=new Error("Session not Valid");return t(o)}e()}))}));case 5:return e.abrupt("return",Se((function(e,t){n.getUserAttributes((function(n,r){n&&t(n);for(var o={},i=0;i<r.length;i++)o[r[i].getName()]=r[i].getValue();e(o)}))})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(){return new Promise((function(e,n){var t=de().getCurrentUser();null===t&&e("No user was signed in");var r=t.getUsername();t.signOut(),e("User: ".concat(r," has been signed out"))}))}function se(e){return new Promise((function(n,t){var r={Username:e,Pool:de()};new s(r).forgotPassword({onSuccess:function(e){n(e)},onFailure:function(e){t(e)}})}))}function le(e,n,t){var r=new s({Username:e,Pool:de()});return new Promise((function(e,o){r.confirmPassword(n,t,{onSuccess:function(n){e(n)},onFailure:function(e){o(e)}})}))}function fe(e,n){return me.apply(this,arguments)}function me(){return(me=p(regeneratorRuntime.mark((function e(n,t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){Ee().then((function(r){return r.updateAttributes([{Name:"phone_number",Value:t}],(function(t,o){t||r.getAttributeVerificationCode("phone_number",{onSuccess:function(){},onFailure:function(e){n(e)},inputVerificationCode:function(n){e(n)}})}))}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pe(e,n){return new Promise((function(e,t){Ee().then((function(r){return r.verifyAttribute("phone_number",n,{onSuccess:function(n){return e(n)},onFailure:function(e){return t(e)}})}))}))}function de(){if(!h){var e={UserPoolId:process.env.AWS_COGNITO_USER_POOL_ID,ClientId:process.env.AWS_COGNITO_USER_POOL_APP_CLIENT};h=new f(e)}return h}function he(){return process.env.AWS_COGNITO_USER_POOL_ID}function ve(){return process.env.AWS_COGNITO_USER_POOL_APP_CLIENT}var ge,we={USER_NOT_CONFIRMED_EXCEPTION:"UserNotConfirmedException",NOT_AUTHORIZED:"NotAuthorizedException",INVALID_PARAMETER_EXCEPTION:"InvalidParameterException",CODE_MISMATCH_EXCEPTION:"CodeMismatchException",USER_NOT_FOUND_EXCEPTION:"UserNotFoundException"},Ee=function(){var e=de().getCurrentUser();return new Promise((function(n,t){e.getSession((function(r,o){if(r)return t(r);n(e)}))}))},Ne=function(e){return new Promise((function(n,t){var r=new Image;r.addEventListener("load",(function(){return n(r)})),r.addEventListener("error",(function(e){return t(e)})),r.setAttribute("crossOrigin","anonymous"),r.src=e}))};function be(e){return e*Math.PI/180}function Oe(e,n){return Pe.apply(this,arguments)}function Pe(){return(Pe=p(regeneratorRuntime.mark((function e(n,t){var r,o,i,u,a,c,s,l=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]?l[2]:0,e.next=3,Ne(n);case 3:return o=e.sent,i=document.createElement("canvas"),u=i.getContext("2d"),a=Math.max(o.width,o.height),c=a/2*Math.sqrt(2)*2,i.width=c,i.height=c,u.translate(c/2,c/2),u.rotate(be(r)),u.translate(-c/2,-c/2),u.drawImage(o,c/2-.5*o.width,c/2-.5*o.height),s=u.getImageData(0,0,c,c),i.width=t.width,i.height=t.height,u.putImageData(s,Math.round(0-c/2+.5*o.width-t.x),Math.round(0-c/2+.5*o.height-t.y)),e.abrupt("return",new Promise((function(e){i.toBlob((function(n){e(URL.createObjectURL(n))}),"image/jpeg")})));case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _e,Ae,Ce=n.Option,Ie={SUCCESS:1,ERROR:2,WARNING:3,INFO:4},Ue=i.img(ge||(_e=["\n  margin-right: 10px;\n"],Ae||(Ae=_e.slice(0)),ge=Object.freeze(Object.defineProperties(_e,{raw:{value:Object.freeze(Ae)}})))),xe=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ie.INFO;if(n){var o,i;switch(r){case Ie.SUCCESS:o=e.success,i=g;break;case Ie.ERROR:o=e.error,i=v;break;case Ie.WARNING:o=e.warning,i=w;break;default:o=e.info,i=w}o({content:n,icon:t.createElement(Ue,{src:i})})}},Re=function(e){var n,t,r,o,i,u,a=[{name:"email",value:null==e||null===(n=e.location)||void 0===n||null===(t=n.state)||void 0===t||null===(r=t.vetData)||void 0===r?void 0:r.email}];return null==e||null===(o=e.location)||void 0===o||null===(i=o.state)||void 0===i||null===(u=i.userAttributes)||void 0===u||u.forEach((function(e){if("given_name"===e.Name)a.push({name:"fullName",value:e.Value}),a.push({name:"businessName",value:e.Value});else if("phone_number"===e.Name){var n=T(e.Value),t=n.countryCode,r=n.strippedNumber;a.push({name:"phone",value:r}),a.push({name:"countryCode",value:t})}})),a},Se=function(e){return new Promise((function(n,t){return e(n,t)}))};function ye(e){return((null==e?void 0:e.edges)||[]).map((function(e){return null==e?void 0:e.node})).filter((function(e){return!!e}))}function Te(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e,n){return t.createElement(Ce,{key:n,value:e},e)}))}export{we as COGNITO_ERROR_TYPES,Ie as NOTIFICATION_TYPE,le as confirmPassword,re as confirmSignUp,ye as convertGqlResponse,J as doPasswordsMatch,ue as fetchAttributes,se as forgotPass,Re as getCognitoFormFields,Ee as getCognitoUser,T as getCountryCodeAndStrippedNumber,Oe as getCroppedImg,ee as getUserAttributes,de as getUserPool,ve as getUserPoolAppClient,he as getUserPoolID,K as getValidCountryCode,Q as getValidPhoneNumber,z as handlePhoneNumberValidation,L as handlePhoneNumberValidationWithCountry,V as isAddressValid,q as isCountryCodeValid,G as isEmailValid,B as isFullNameValid,M as isLicenseNumberValid,X as isMobileValid,F as isMobileValidWithCountry,j as isNumberValid,H as isOTPValid,W as isPasswordValid,Z as isRequired,y as isValidNumber,k as isValidNumberWithCountry,D as isYearsOfExpValid,Y as loadable,ie as login,Se as promisify,Te as renderSelectOptions,oe as resendConfirmationCode,xe as showNotification,ce as signOut,te as signUp,$ as type,fe as updatePhoneNumberRequest,pe as verifyPhoneNumberRequest};
//# sourceMappingURL=utils.js.map
