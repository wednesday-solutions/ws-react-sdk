import{d as e}from"./_rollupPluginBabelHelpers-c2a46d82.js";import"./_rollup-plugin-inject-process-env-0dfb24f4.js";import{CognitoUser as r,CognitoUserPool as n}from"amazon-cognito-identity-js";function o(e){return new Promise(((n,o)=>{var t=u(),i=new r({Username:e,Pool:t});if(null===i){var s=new Error({code:"NotAuthorizedException",message:"No user data is present",name:"NotAuthorizedException"});o(s)}i.resendConfirmationCode((function(e,r){e&&o(e),n(r)}))}))}function t(e,r){return i.apply(this,arguments)}function i(){return(i=e((function*(e,r){return new Promise(((e,n)=>{a().then((o=>o.updateAttributes([{Name:"phone_number",Value:r}],((r,t)=>{r||o.getAttributeVerificationCode("phone_number",{onSuccess:()=>{},onFailure:e=>{n(e)},inputVerificationCode:r=>{e(r)}})}))))}))}))).apply(this,arguments)}var s;function u(){if(!s){var e={UserPoolId:process.env.AWS_COGNITO_USER_POOL_ID,ClientId:process.env.AWS_COGNITO_USER_POOL_APP_CLIENT};s=new n(e)}return s}var a=()=>{var e=u().getCurrentUser();return new Promise(((r,n)=>{e.getSession(((o,t)=>{if(o)return n(o);r(e)}))}))};export{o as r,t as u};
