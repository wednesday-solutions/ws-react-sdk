import{_ as e,b as t,d as r}from"../_rollupPluginBabelHelpers-c2a46d82.js";import"../_rollup-plugin-inject-process-env-0dfb24f4.js";import n,{useState as o,useEffect as i}from"react";import a from"prop-types";import{u as m}from"../cognito-8b652482.js";import l from"libphonenumber-js";import{FormattedMessage as s}from"react-intl";import d from"../CustomInput/index.js";import u from"../FormItem/index.js";import{appIntl as p}from"../IntlGlobalProvider/index.js";import f from"../If/index.js";import g from"../T/index.js";import c from"styled-components";import{c as b}from"../colors-bf7c26a7.js";import{f as F}from"../fonts-56bad7cc.js";import{m as y}from"../media-54d0e07e.js";import"amazon-cognito-identity-js";import"antd/lib/input/style";import"antd/lib/input";import"antd/lib/form/style";import"antd/lib/form";var h,v,C,_,x,V=e=>((e,t,r)=>({[e]:t,message:r.trim().length>0?n.createElement(s,{id:r}):"Invalid Input Value"}))("required",!0,e),j=(e,t)=>{try{return(null==t||!t.length||"0"!==t[0])&&l(e+t).isValid()}catch(e){return!1}},w=e=>{var t=e;return e&&"+"!==e[0]&&(t="+"+e),t},E=(e,t)=>{var r=t;return t&&"0"===t[0]&&(r=t.substr(1,t.length)),w(e)+r},k=c(u)(h||(h=e(["\n  flex: 0.25;\n  ",";\n  max-width: 6rem;\n  min-width: 4rem;\n"])),y.tablet.max("\n  flex: 0.15;\n  ")),I=c.div(v||(v=e(["\n  display: flex;\n"]))),M=c(u)(C||(C=e(["\n  flex: 1;\n  margin-left: 1rem !important;\n"]))),T=c(g)(_||(_=e(["\n  && {\n    cursor: pointer;\n    color: ",";\n    text-transform: uppercase;\n    ",";\n    ",";\n    margin-bottom: 0;\n  }\n"])),b.darkFuchsia,F.size.xSmall(),F.weights.fw600()),L=c(d)(x||(x=e(["\n  /* Chrome, Safari, Edge, Opera */\n  input::-webkit-outer-spin-button,\n  input::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n  /* Firefox */\n  input[type='number'] {\n    -moz-appearance: textfield;\n  }\n"])));function N(e){var{countryCode:a,strippedNumber:l,showVerify:s}=e,u=t(e,["countryCode","strippedNumber","showVerify"]),[g,c]=o(!1),[b,F]=o(!1),[y,h]=o();i((()=>{y||E(a,l)===y||F(!1)}),[l,a]);var v,C=()=>{g?E(u.getForm().getFieldValue("countryCode"),u.getForm().getFieldValue("phone"))===y&&c(!1):(c(!0),h(E(a,l)))},_=function(){var e=r((function*(){if(j(u.getForm().getFieldValue("countryCode"),u.getForm().getFieldValue("phone")))yield m(u.getForm().getFieldValue("email"),E(u.getForm().getFieldValue("countryCode"),u.getForm().getFieldValue("phone"))),u.verifyClickListener();else{u.getForm().validateFields(["countryCode","phone"])}}));return function(){return e.apply(this,arguments)}}();return n.createElement(I,{"data-testid":"mobile-number-with-country-code"},n.createElement(k,{initialValue:w(a),rules:[{message:p().formatMessage({id:"invalid_mobile_num_msg"}),validator:(e,t,r)=>{j(u.getForm().getFieldValue("countryCode"),u.getForm().getFieldValue("phone"))?r():u.getForm().setFields([{name:"phone",errors:[p().formatMessage({id:"invalid_mobile_num_msg"})]}])}}],validateTrigger:"onBlur",name:"countryCode"},n.createElement(d,{onChange:C,"data-testid":"code-input",autoComplete:"off",maxLength:4,placeholder:process.env.DEFAULT_COUNTRY_CODE})),n.createElement(M,{initialValue:l,rules:[...(v=p().formatMessage({id:"field_required"}),[V(v)]),{message:p().formatMessage({id:"invalid_mobile_num_msg"}),validator:(e,t,r)=>{j(u.getForm().getFieldValue("countryCode"),u.getForm().getFieldValue("phone"))?r():r(new Error(p().formatMessage({id:"invalid_mobile_num_msg"})))}}],validateTrigger:"onBlur",name:"phone"},n.createElement(L,{type:"number",suffix:n.createElement(f,{condition:!b&&s&&g},n.createElement(T,{id:"verify",onClick:_})),onChange:C,autoComplete:"off","data-testid":"mobile-input",placeholder:p().formatMessage({id:"contact_no"})})))}N.propTypes={getForm:a.func,countryCode:a.string,strippedNumber:a.string,showVerify:a.bool,verifyClickListener:a.func},N.defaultProps={verifyClickListener:()=>{}};export default N;
